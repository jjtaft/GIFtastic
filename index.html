<!DOCTYPE html>

<html lang="en-us">
<head>
	<title>Giphy Page</title>


</head>

<meta charset="UTF-8">

<body>

<div class="container">
    <h1>Animal GIFs</h1>

    <!-- Rendered buttons will get dumped here  -->
    <div id="buttons-view"></div>

    <form id="animal-form">

      <label for="animal-input">Add An Animal</label>
      <input type="text" id="animal-input"><br>

      <!-- Button triggers new animal to be added -->
      <input id="add-animal" type="submit" value="Submit">
    </form>

	<div id="animal-view"></div>


<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript">
    	
    	var animals = ["cat", "dog", "rabbit", "hamster", "sloth"];


    	function displayAnimalGifs() {

    	var animal = $(this).attr("data-name");

		var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=dc6zaTOxFJmzC&limit=10";

		$.ajax({
          url: queryURL,
          method: "GET"
        })
        .done(function(response) {

        	var results = response.data;

        	console.log(response);

        	for (var i = 0; i < results.length; i++) {

        	var animalDiv = $("<div class='animal'>");

        	var stillImg = results[i].images.fixed_width_still.url;

	    	var animateImg = results[i].images.fixed_width.url;

	    	var imgState = stillImg

          	var rating = results[i].rating;

          	var p = $("<p>").text("Rating: " + rating);

          	var animalImage = $("<img>");
            animalImage.attr("src", imgState);

            animalDiv.prepend(p);
            animalDiv.prepend(animalImage);

            $("#animal-view").prepend(animalDiv);

        };

    	});
 		
    };


    	function createButtons() {

    	$("#buttons-view").empty();

        for (var i = 0; i < animals.length; i++) {

          var a = $("<button>");
         
          a.addClass("animal");
        
          a.attr("data-name", animals[i]);
         
          a.text(animals[i]);

          $("#buttons-view").append(a);
        }
      };

$("#add-animal").on("click", function(event) {
        event.preventDefault();

        var animal = $("#animal-input").val().trim();

        animals.push(animal);

        createButtons();
      });


$(document).on("click", ".animal", displayAnimalGifs);

      createButtons();


	</script>
</body>
</html>